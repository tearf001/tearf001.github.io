webpackJsonp([33],{HGVP:function(e,t,i){(e.exports=i("FZ+f")(!1)).push([e.i,"\n.chart-container[data-v-64812e0c] {\n  position: relative;\n  padding: 20px;\n  /*width: 100%;*/\n  height: 85vh;\n}\n",""])},JiY5:function(e,t,i){var n=i("HGVP");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("rjj0")("596fde83",n,!0)},"q/Nx":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("fZjL"),s=i.n(n),c=i("c/Tr"),a=i.n(c),l=i("XLwt"),r=i.n(l),o=i("r13W"),d=i("QOdC"),u=i("xtwg"),h=i("LPbS"),_=i("0xDb"),p=i("Y81h"),f=i.n(p),v={value:"业务量",unit:"单位(量)",legend_indexes:["移动发展","无双卡","红包卡","不限量套餐","十全十美套餐","宽带","ITV"],legend_selected:["十全十美套餐"],x_data:a()({length:12},function(e,t){return"18-1-"+t}),series_data:[[220,133,191,134,150,120,110,125,145,122,165,221],[441,99,121,45,122,165,122,220,182,191,134,322],[123,77,90,245,22,191,65,150,55,55,165,122],[32,66,80,125,42,191,89,150,120,110,165,98],[134,44,45,135,172,191,133,220,120,22,165,76],[76,23,145,165,44,191,160,213,22,110,165,45],[55,32,125,75,55,191,134,101,120,55,165,23]]},S=new Date,k=Object(_.h)(S),b={data:function(){return{chart:null,mode:"bar",checkedList:[],cur_leaves:[],selectedSidx:[],loadingTree:"加载中",sd:new Date(k.getFullYear(),k.getMonth(),1),ed:k,twOps:[["天","date"],["周","week"],["月","month"],["年","year",!1]],twSplit:"date",seriesUseGroupStack:!1,ECHART_LIST_MAX:u.i,ECHART_CMP_MAX:u.h,space_id:"",dep_id:"",staff_code:"",site_id:"",sites:[]}},name:"lineChart",methods:{initChart:function(e){var t={type:"category",boundaryGap:"bar"===e,axisLine:{lineStyle:{color:"#fff"}}};this.mode=e,this.chart.setOption(Object(o.a)(e,{struct:v,xAxisOps:t}))},cleanSelection:function(){this.checkedList=[]},AddSelection:function(){var e=this.cur_leaves,t=this.motion;e.length>=u.i?Object(h.b)("最多只能候选"+u.i+"个单位/个人"):e.find(function(e){return i=e,n=t,s()(i).every(function(e){return"path"===e||"checked"===e||i[e]===n[e]});var i,n})||(this.$set(t,"path",this.$store.getters.getSelectPath(t)),this.$set(t,"checked",!0),e.push(t))},getSiteManual:function(){var e=this;f.a.start(),this.$store.dispatch("getSiteBy2Factor",[this.space_id,this.dep_id]).then(function(t){f.a.done(),e.sites=t})},generateStackedLegend:function(){}},created:function(){},mounted:function(){var e=this,t=this.SD,i=this.ED;this.chart=r.a.init(document.getElementById("echart_pg")),Object(d.a)({Sql:"default_pulse_grid",Args:{use_cache:0,SD:t,ED:i,DEP:u.o}}).then(function(t){e.initChart("bar")}).catch(function(e){})},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},computed:{fmt:function(){return"week"===this.twSplit?"yyyy 第 WW 周":"date"===this.twSplit?"yyyy-MM-dd":void 0},SD:function(){return"week"===this.twSplit?Object(_.b)(this.sd):this.sd},ED:function(){return"week"===this.twSplit?Object(_.c)(Object(_.h)(Object(_.b)(this.ed),7),k):"month"===this.twSplit?Object(_.c)(new Date(this.ed.getFullYear(),this.ed.getMonth()+1,0),k):Object(_.c)(Object(_.h)(this.ed,1),k)},ORG_BASE:function(){return this.$store.getters.ORG_BASE},deps:function(){return this.$store.getters.getDepBySpace(this.space_id)},spaces:function(){return this.$store.getters.getSpaceByDep(this.dep_id)},staffs:function(){return this.staff_code="",this.$store.getters.getStaffBySite(this.site_id)},motion:function(){var e=this.staff_code,t=this.site_id,i=this.dep_id,n=this.space_id;return e?{STAFF_CODE:e}:t?{SITE_ID:t}:i?{DEP_ID:i}:n?{SPACE_ID:n}:void 0},SIDX:function(){return this.$store.getters.SIDX},shouldRender:function(){return this.cur_leaves.map(function(e){return e.path+":"+e.checked&1}).sort().join("/")+" "+this.selectedSidx.sort().join("/")}},watch:{shouldRender:function(e,t){var i=this,n=this.cur_leaves,c=this.selectedSidx,a=this.SD,l=this.ED,r=this.twSplit;function o(e){if(!e.checked)return!1;if(s()(e).find(function(e){return"path"!==e&&"checked"!==e})){var t=Object(_.a)(e);return delete e.path,delete e.checked,t}}(n=n.filter(o).map(o)).length&&c&&Object(d.e)({Space:n,Sidx:[c],SD:a,ED:l,Scale:r}).then(function(e){v=e,i.initChart(i.mod)}).catch(function(e){Object(h.b)("加载数据发生错误",e)})}}},m={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-col",{attrs:{span:24}},[i("el-col",{attrs:{span:4}},[i("el-select",{attrs:{placeholder:"选择地域.."},on:{change:e.getSiteManual},model:{value:e.space_id,callback:function(t){e.space_id=t},expression:"space_id"}},[i("el-option",{attrs:{value:""}},[e._v("不选")]),e._v(" "),e._l(e.spaces,function(e){return i("el-option",{key:e.V,attrs:{label:e.N,value:e.V}})})],2),e._v(" "),i("el-select",{attrs:{placeholder:"选择部门.."},on:{change:e.getSiteManual},model:{value:e.dep_id,callback:function(t){e.dep_id=t},expression:"dep_id"}},[i("el-option",{attrs:{value:""}},[e._v("不选")]),e._v(" "),e._l(e.deps,function(e){return i("el-option",{key:e.V,attrs:{label:e.N,value:e.V}})})],2),e._v(" "),i("el-select",{attrs:{placeholder:"选择营业厅"},model:{value:e.site_id,callback:function(t){e.site_id=t},expression:"site_id"}},[i("el-option",{attrs:{value:""}},[e._v("不选")]),e._v(" "),e._l(e.sites,function(e){return i("el-option",{key:e.V,attrs:{label:e.N,value:e.V}})})],2),e._v(" "),i("el-select",{attrs:{placeholder:"业务员"},model:{value:e.staff_code,callback:function(t){e.staff_code=t},expression:"staff_code"}},[i("el-option",{attrs:{value:""}},[e._v("不选")]),e._v(" "),e._l(e.staffs,function(e){return i("el-option",{key:e.STAFF_CODE,attrs:{label:e.STAFF_NAME+"-"+e.STAFF_CODE,value:e.STAFF_CODE}})})],2),e._v(" "),e.space_id||e.dep_id?i("el-button",{attrs:{type:"primary"},on:{click:e.AddSelection}},[e._v("加入对比")]):e._e(),e._v(" "),e.mix_show_dev_inf?i("div",[e._v("\n      space="+e._s(e.space_id)+",dep="+e._s(e.dep_id)+",site:"+e._s(e.site_id)+"\n      "),i("hr"),e._v("\n      staff_code"+e._s(e.staff_code)+",sites:"+e._s(e.sites.length)+"\n      "),i("hr"),e._v("\n      "+e._s(e.motion)+"\n    ")]):e._e()],1),e._v(" "),i("el-col",{staticClass:"chart-container",attrs:{span:20}},[i("span",{attrs:{title:e.checkedList.toString()}},[e._v("对比候选区")]),e._v(" "),i("el-checkbox-group",{attrs:{min:1},model:{value:e.checkedList,callback:function(t){e.checkedList=t},expression:"checkedList"}},e._l(e.cur_leaves,function(t,n){return i("el-checkbox",{key:n,attrs:{label:t.path,checked:t.checked},model:{value:t.checked,callback:function(i){e.$set(t,"checked",i)},expression:"lf.checked"}})})),e._v(" "),i("el-button-group",[i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.initChart("line")}}},[e._v("线性")]),e._v(" "),i("el-button",{on:{click:function(t){e.initChart("bar")}}},[e._v("柱状")])],1),e._v(" "),i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.twSplit,callback:function(t){e.twSplit=t},expression:"twSplit"}},e._l(e.twOps,function(e){return i("el-option",{key:e[1],attrs:{label:e[0],value:e[1],disabled:!1===e[2]}})})),e._v(" "),i("el-date-picker",{attrs:{type:e.twSplit,format:e.fmt,title:e._f("fmtDate")(e.SD),"picker-options":{firstDayOfWeek:1}},model:{value:e.sd,callback:function(t){e.sd=t},expression:"sd"}}),e._v(" "),e.mix_show_dev_inf?i("span",[e._v(e._s(e._f("parseTime")(e.sd)))]):e._e(),e._v(" "),i("el-date-picker",{attrs:{type:e.twSplit,format:e.fmt,title:e._f("fmtDate")(e.ED),"picker-options":{firstDayOfWeek:1}},model:{value:e.ed,callback:function(t){e.ed=t},expression:"ed"}}),e._v(" "),e.mix_show_dev_inf?i("span",[e._v(e._s(e._f("parseTime")(e.ed)))]):e._e(),e._v(" "),i("el-checkbox",{attrs:{label:"使用堆叠"},model:{value:e.seriesUseGroupStack,callback:function(t){e.seriesUseGroupStack=t},expression:"seriesUseGroupStack"}}),e._v(" "),i("el-select",{attrs:{multiple:"",placeholder:"选择一个或多个指标"},model:{value:e.selectedSidx,callback:function(t){e.selectedSidx=t},expression:"selectedSidx"}},e._l(e.SIDX,function(e){return i("el-option",{key:e.SIDX_ID,attrs:{value:e.SIDX_ID,label:e.SIDX_NAME}})})),e._v(" "),i("el-button",{on:{click:e.cleanSelection}},[e._v("清空所选")]),e._v(" "),i("div",{style:{height:"100%",width:"100%"},attrs:{id:"echart_pg"}})],1)],1)},staticRenderFns:[]};var g=i("VU/8")(b,m,!1,function(e){i("JiY5")},"data-v-64812e0c",null);t.default=g.exports}});